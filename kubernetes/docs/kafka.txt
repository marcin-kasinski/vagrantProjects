
./kafka-consumer-groups.sh --bootstrap-server kafka-0.k-hs.default.svc.cluster.local:9092,kafka-1.k-hs.default.svc.cluster.local:9092,kafka-2.k-hs.default.svc.cluster.local:9092 --list

./kafka-console-consumer.sh --bootstrap-server kafka-0.k-hs.default.svc.cluster.local:9092,kafka-1.k-hs.default.svc.cluster.local:9092,kafka-2.k-hs.default.svc.cluster.local:9092 --topic mysql-foobar




# Create ACLs

1.) Allow users _reader_ and _writer_ to consumer from topic _acl-test_

KAFKA_OPTS="" \
/opt/kafka/bin/kafka-acls.sh \
--authorizer-properties zookeeper.connect=zk-0.zk-hs.default.svc.cluster.local:2181,zk-1.zk-hs.default.svc.cluster.local:2181,zk-2.zk-hs.default.svc.cluster.local:2181/kafka --add \
--allow-principal User:reader --allow-principal User:writer \
--operation Read \
--group=* \
--topic my-topic

2.) Allow user _writer_ to produce messages into topic _acl-test_
```
~/kafka/bin/kafka-acls.sh \
--authorizer-properties zookeeper.connect=<<KAFKA-SERVER-PUBLIC-DNS>>:2181 --add \
--allow-principal User:writer \
--operation Write \
--topic acl-test






------------------------ SSL ------------------------




nano client-ssl-auth.properties

security.protocol=SSL
ssl.truststore.location=/opt/kafka/config/truststore-kafka-0.jks
ssl.truststore.password=secret
ssl.keystore.location=/opt/kafka/config/keystore-kafka-0.jks
ssl.keystore.password=secret
ssl.key.password=secret



KAFKA_OPTS="" 
zookeeper=zk-0.zk-hs.default.svc.cluster.local:2181,zk-1.zk-hs.default.svc.cluster.local:2181,zk-2.zk-hs.default.svc.cluster.local:2181/kafka
brokers=kafka-0.k-hs.default.svc.cluster.local:9094,kafka-1.k-hs.default.svc.cluster.local:9094,kafka-2.k-hs.default.svc.cluster.local:9094
#brokers=kafka-0.k-hs.default.svc.cluster.local:9094

kafka-topics.sh --list --zookeeper $zookeeper
kafka-topics.sh  --create --zookeeper $zookeeper --partitions 1 --replication-factor 1 --topic mktopic


# Listing acls

kafka-acls.sh --authorizer-properties zookeeper.connect=$zookeeper --list --topic mktopic


kafka-acls.sh --authorizer-properties zookeeper.connect=$zookeeper --add --allow-principal User:CN=testkafkaconsumer1.eigenroute.com --operation Describe --topic mktopic


kafka-console-producer.sh --broker-list $brokers --producer.config ./client-ssl-auth.properties --topic mktopic
kafka-console-consumer.sh --bootstrap-server $brokers --consumer.config ./client-ssl-auth.properties --topic mktopic


openssl s_client -showcerts -connect kafka-0.k-hs.default.svc.cluster.local:9094




------------------------ SSL ------------------------

